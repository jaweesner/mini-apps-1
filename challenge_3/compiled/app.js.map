{"version":3,"sources":["../client/app.jsx"],"names":["App","props","state","message","win","turn","players","potentialPlayers","setState","newTurn","length","num","push","pop","playerChange","bind","reset","onMessage","toggleWin","incrementTurn","React","Component","Board","board","index","stackHeight","messageHandler","checkWins","checkTie","onTurn","every","col","onWin","row","turnAlias","checkRowDiag","rowVals","inARow","rowIndex","checkCol","colVals","rowArr","map","column","majorFirst","minorFirst","majorArr","minorArr","columnClickHandler","Column","e","onClick","pieces","piece","playerNum","Piece","style","color","UserNotification","Nav","toString","ReactDOM","render","document","getElementById"],"mappings":"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","file":"app.js","sourcesContent":["class App extends React.Component{\n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmessage: \"Let's Play!\",\n\t\t\twin: false,\n\t\t\tturn: 0,\n\t\t\tplayers: ['purple', 'teal'],\n\t\t\tpotentialPlayers: ['grey','green','black']\n\t\t}\n\t}\n\n\tonMessage(message){\n\t\tthis.setState({message: message||\"Let's Play!\"});\n\t}\n\n\ttoggleWin(){\n\t\tthis.setState({win: !this.state.win});\n\t}\n\n\tincrementTurn(){\n\t\tlet newTurn = this.state.players.length-1 === this.state.turn ? 0 : ++this.state.turn;\n\t\tthis.setState({turn: newTurn});\n\t}\n\treset(){\n\t\tthis.setState({\n\t\t\tmessage: \"Let's Play!\",\n\t\t\twin: false,\n\t\t\tturn: 0,\n\t\t\tplayers: ['purple', 'teal'],\n\t\t\tpotentialPlayers: ['grey','green','black']\n\t\t})\n\t}\n\n\tplayerChange(num){\n\t\tif (num>0) {\n\t\t\tif(this.state.potentialPlayers.length === 0){return}\n\t\t\tthis.state.players.push(this.state.potentialPlayers.pop())\n\t\t\tthis.setState({players:this.state.players});\n\t\t}if(num<0){\n\t\t\tif(this.state.players.length <=2){return}\n\t\t\tthis.state.potentialPlayers.push(this.state.players.pop());\n\t\t\tthis.setState({players:this.state.players})\n\t\t} \n\t}\n\n\trender(){\n\t\treturn <div>\n\t\t\t\t<Nav \n\t\t\t\t\tplayers = {this.state.players} \n\t\t\t\t\tturn = {this.state.turn} \n\t\t\t\t\tplayerChange = {this.playerChange.bind(this)}\n\t\t\t\t\treset = {this.reset.bind(this)}\n\t\t\t\t/>\n\t\t\t\t<Board \n\t\t\t\t\tmessageHandler={this.onMessage.bind(this)} \n\t\t\t\t\twin = {this.state.win} \n\t\t\t\t\tturn = {this.state.turn}\n\t\t\t\t\tonWin = {this.toggleWin.bind(this)}\n\t\t\t\t\tplayers = {this.state.players}\n\t\t\t\t\tonTurn = {this.incrementTurn.bind(this)}\n\t\t\t\t/>\n\t\t\t\t<UserNotification message={this.state.message} />\n\t\t</div>\n\t}\n}\n\n\n//board state should look like [red, black, red]\nclass Board extends React.Component {\n\tconstructor (props){\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tboard : [],\n\t\t}\n\t\twhile(this.state.board.length<props.players.length*4){\n\t\t\tthis.state.board.push([])\n\t\t}\n\t}\n\n\tcolumnClickHandler(index){\n\t\tif (this.props.win){ return } \n\t\tvar stackHeight = this.state.board[index].length\n\n\t\tif (stackHeight===this.state.board.length) {\n\t\t\treturn this.props.messageHandler(\"That column is full. Choose another.\")\n\t\t}\n\t\tthis.props.messageHandler();\n\t\tthis.state.board[index].push(this.props.players[this.props.turn])\n\t\tthis.setState({board: this.state.board})\n\t\tthis.checkWins(index, stackHeight); //Pass in coords of the placed piece\n\t\tthis.checkTie();\n\t\tthis.props.onTurn();\n\n\t}\n\n\tcheckTie(){\n\t\tif(this.state.board.every((col) => col.length === this.state.board.length)){ \n\t\t\tthis.props.messageHandler(\"Oh no, a tie...\")\n\t\t\tthis.props.onWin();\n\n\t\t}\n\t}\n\n\tcheckWins(col, row){\n\t\tvar turnAlias = this.props.players[this.props.turn];\n\t\tvar checkRowDiag = function(rowVals){\n\t\t\tvar inARow = 1;\n\t\t\tvar rowIndex = col;\n\t\t\twhile(rowVals[--rowIndex] === turnAlias){\n\t\t\t\tinARow++;\n\t\t\t}\n\t\t\trowIndex = col;\n\t\t\twhile(rowVals[++rowIndex] === turnAlias){\n\t\t\t\tinARow++;\n\t\t\t}\n\t\t\treturn inARow>=4 ? true : false;\n\t\t}\n\n\t\tvar checkCol = function(colVals){\n\t\t\tvar inARow = 1;\n\t\t\twhile(colVals[--row] === turnAlias){\n\t\t\t\tinARow++;\n\t\t\t}\n\t\t\treturn inARow>=4 ? true : false;\n\t\t}\n\n\t\tvar rowArr = this.state.board.map(column => column[row]|| null)\n\t\tvar majorFirst = -(col-row);\n\t\tvar minorFirst = col+row;\n\t\tvar majorArr = this.state.board.map(column => column[majorFirst++]||null);\n\t\tvar minorArr = this.state.board.map(column => column[minorFirst--]||null);\n\n\n\t\tif (checkRowDiag(rowArr)||checkCol(this.state.board[col])||checkRowDiag(majorArr)||checkRowDiag(minorArr)){\n\t\t\tthis.props.messageHandler(turnAlias + \" wins!!!\")\n\t\t\tthis.props.onWin();\n\t\t}\n\t}\n\tcomponentWillUpdate(){\n\t\tif(this.state.board.length!==this.props.players.length*4){\n\t\t\tthis.state.board = [];\n\t\t\twhile(this.state.board.length<this.props.players.length*4){\n\t\t\t\tthis.state.board.push([])\n\t\t\t}\n\t\t}\n\n\t}\n\n\trender(){\n\t\treturn <div className= \"gameBoard\">\n\t\t\t{this.state.board.map( (col, index) => \n\t\t\t\t<Column \n\t\t\t\t\tpieces={col} \n\t\t\t\t\tkey = {index} \n\t\t\t\t\tindex = {index} \n\t\t\t\t\tonClick = {this.columnClickHandler.bind(this)} \n\t\t\t\t\tplayerNum = {this.props.players.length} \n\t\t\t\t/> )}\n\t\t</div>\n\t}\n}\n\nvar Column = (props) => (\n\t<div className = \"col\" onClick = {(e)=>props.onClick(props.index)}>\n\t\t{props.pieces.map((piece, index) => <Piece color = {piece} key = {index} playerNum = {props.playerNum}/>)}\n\t</div>\n\t);\n\nvar Piece = (props) => {\n\tvar style = {\n\t\t\"width\" : 430/(props.playerNum*4),\n\t\t\"height\": 430/(props.playerNum*4),\n\t\t\"backgroundColor\": props.color\n\n\t}\n\treturn <div style= {style} className = \"piece\"  >\n\t</div>\n};\n\nvar UserNotification = (props) => (\n\t<h1 className = \"message\">\n\t\t{props.message}\n\t</h1>\n);\n\nvar Nav = (props) => (\n\t<div>\n\t\t<button onClick= {()=>props.playerChange(1)}>Add Player</button>\n\t\t<button onClick= {()=>props.playerChange(-1)}>Remove Player</button>\n\t\t<button onClick= {props.reset}>Reset Game</button>\n\t\t<div> Players: {props.players.toString()} </div>\n\t\t<div> {props.players[props.turn]}'s turn </div> \n\t</div>\n);\nReactDOM.render(<App/>, document.getElementById('App'));\n"]}